
<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="color-scheme" content="light dark" />

  
  <title>To celebrate the opening of voting in the Alberta NDP leadership race... | The Strategists</title>

  





  
  <meta name="description" content="...a new (Zain disapproved, zAIn approved) song reminding you that everybody&#39;s free (to wear purple). Courtesy Haxim." />
  <meta name="robots" content="index,follow,max-image-preview:large" />
  

  
  <meta property="og:site_name" content="The Strategists" />
  <meta property="og:title" content="To celebrate the opening of voting in the Alberta NDP leadership race..." />
  <meta property="og:description" content="...a new (Zain disapproved, zAIn approved) song reminding you that everybody&#39;s free (to wear purple). Courtesy Haxim." />
  
  <meta property="og:type" content="article" />
  <meta property="article:published_time" content="2024-06-03T20:37:29Z" />
  
    
    <meta property="og:image" content="/assets/og-default.png" />
    <meta name="twitter:image" content="/assets/og-default.png" />
  

  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:title" content="To celebrate the opening of voting in the Alberta NDP leadership race..." />
  <meta name="twitter:description" content="...a new (Zain disapproved, zAIn approved) song reminding you that everybody&#39;s free (to wear purple). Courtesy Haxim." />

  
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "PodcastEpisode",
    "name": "To celebrate the opening of voting in the Alberta NDP leadership race...",
    "description": "...a new (Zain disapproved, zAIn approved) song reminding you that everybody\u0027s free (to wear purple). Courtesy Haxim.",
    
    "datePublished": "2024-06-03T20:37:29Z",
    
    "partOfSeries": {
      "@type": "PodcastSeries",
      "name": "The Strategists",
      
      "publisher": {
        "@type": "Organization",
        "name": "The Strategists"
      }
    },
    "associatedMedia": {
      "@type": "AudioObject",
      "contentUrl": "",
      "encodingFormat": "audio/mpeg"
    }
  }
  </script>

  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "BreadcrumbList",
    "itemListElement": [
      {
        "@type": "ListItem",
        "position": 1,
        "name": "Episodes",
        "item": "/"
      }
      
    ]
  }
  </script>

  
  <style>
    :root{
      --brand: #d7522f;
      --accent: #232e41;
      --bg: #0b1020;
      --panel: rgba(255,255,255,0.06);
      --panel-2: rgba(255,255,255,0.10);
      --text: rgba(255,255,255,0.92);
      --muted: rgba(255,255,255,0.72);
      --muted2: rgba(255,255,255,0.55);
      --line: rgba(255,255,255,0.12);
      --shadow: 0 16px 40px rgba(0,0,0,.35);
      --shadow2: 0 8px 22px rgba(0,0,0,.28);
      --radius: 18px;
      --radius2: 12px;
      --maxw: 1100px;
      --pad: clamp(16px, 3vw, 26px);
      --sticky-shadow: 0 10px 28px rgba(0,0,0,.35);
      --topbar-h: 58px;
    }

    @media (prefers-color-scheme: light){
      :root{
        --bg: #fbfbfd;
        --panel: rgba(0,0,0,0.04);
        --panel-2: rgba(0,0,0,0.06);
        --text: rgba(0,0,0,0.92);
        --muted: rgba(0,0,0,0.68);
        --muted2: rgba(0,0,0,0.52);
        --line: rgba(0,0,0,0.10);
        --shadow: 0 16px 40px rgba(0,0,0,.12);
        --shadow2: 0 8px 22px rgba(0,0,0,.10);
        --sticky-shadow: 0 10px 28px rgba(0,0,0,.12);
      }
    }

    *{ box-sizing: border-box; }
    html,body{ height:100%; }
    body{
      margin:0;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji","Segoe UI Emoji";
      line-height: 1.55;
      color: var(--text);
      background:
        radial-gradient(1000px 600px at 20% -10%, rgba(215,82,47,.32), transparent 60%),
        radial-gradient(1000px 600px at 100% 0%, rgba(35,46,65,.50), transparent 55%),
        linear-gradient(180deg, var(--bg), var(--bg));
      background-attachment: fixed;
    }

    a{ color: inherit; text-decoration: none; }
    a:hover{ text-decoration: underline; }

    .wrap{ max-width: var(--maxw); margin: 0 auto; padding: 0 var(--pad); }

    /* Top bar */
    .topbar{
      position: sticky;
      top: 0;
      z-index: 50;
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
      background: color-mix(in oklab, var(--bg) 80%, transparent);
      border-bottom: 1px solid var(--line);
    }
    .topbar .inner{
      display:flex; align-items:center; justify-content:space-between;
      gap: 14px;
      padding: 12px 0;
    }
    .brand{
      display:flex; align-items:center; gap: 10px;
      min-width: 0;
    }
    .brand img{ width: 34px; height: 34px; object-fit: contain; }
    .brand .name{ font-weight: 800; letter-spacing: -0.02em; white-space: nowrap; }
    .brand .tag{ font-size: 13px; color: var(--muted2); white-space: nowrap; overflow:hidden; text-overflow: ellipsis; }

    .navlinks{ display:flex; gap: 10px; flex-wrap: wrap; justify-content: flex-end; }
    .chip{
      display:inline-flex; align-items:center; gap: 8px;
      padding: 8px 12px;
      border-radius: 999px;
      background: var(--panel);
      border: 1px solid var(--line);
      box-shadow: none;
      font-size: 13px;
      color: var(--muted);
    }
    .chip strong{ color: var(--text); font-weight: 650; }
    .chip:hover{ background: var(--panel-2); text-decoration:none; }

    /* Hero */
    .hero{ padding: 26px 0 12px; }
    .hero-grid{
      display:grid;
      grid-template-columns: 1fr;
      gap: 18px;
      align-items: start;
    }
    @media (max-width: 900px){
      .hero-grid{ grid-template-columns: 1fr; }
    }

    .card{
      border-radius: var(--radius);
      background: color-mix(in oklab, var(--panel) 90%, transparent);
      border: 1px solid var(--line);
      box-shadow: var(--shadow);
    }

    .hero-main{ padding: 20px; }
    h1{
      margin: 0 0 10px;
      font-size: clamp(26px, 3.2vw, 40px);
      line-height: 1.1;
      letter-spacing: -0.03em;
    }
    .meta{
      display:flex; flex-wrap:wrap; gap: 10px;
      color: var(--muted);
      font-size: 14px;
      align-items:center;
    }
    .meta .dot{ opacity: .55; }

    .desc{
      margin-top: 14px;
      color: var(--muted);
      font-size: 15px;
    }
    .desc p{ margin: 0.6rem 0; }
    .desc a{ color: var(--text); text-decoration: underline; text-decoration-color: color-mix(in oklab, var(--brand) 70%, transparent); }

    .cta{
      display:flex; gap: 10px; flex-wrap: wrap;
      margin-top: 16px;
    }
    .btn{
      display:inline-flex; align-items:center; justify-content:center; gap: 10px;
      padding: 10px 14px;
      border-radius: 999px;
      border: 1px solid var(--line);
      background: var(--panel);
      color: var(--text);
      font-weight: 650;
      font-size: 14px;
      box-shadow: var(--shadow2);
      cursor: pointer;
      user-select: none;
    }
    .btn:hover{ background: var(--panel-2); text-decoration:none; }
    .btn.primary{
      background: linear-gradient(90deg, color-mix(in oklab, var(--brand) 75%, black), color-mix(in oklab, var(--accent) 70%, black));
      border-color: color-mix(in oklab, var(--brand) 40%, var(--line));
    }

    /* Side card */
    .hero-side{ padding: 16px; }
    .hero-side h3{ margin: 0 0 10px; font-size: 14px; letter-spacing: .02em; text-transform: uppercase; color: var(--muted2); }
    .kv{ display:grid; grid-template-columns: 1fr; gap: 10px; }
    .kv .row{
      display:flex; align-items:center; justify-content:space-between; gap: 10px;
      padding: 10px 12px;
      border-radius: 14px;
      background: var(--panel);
      border: 1px solid var(--line);
      font-size: 14px;
    }
    .kv .k{ color: var(--muted2); }
    .kv .v{ color: var(--text); font-weight: 650; }

    /* Player */
    #player-sentinel{ height: 1px; }
    #player-wrapper{ margin: 14px 0 0; }

    #player-wrapper .player-card{ overflow: hidden; border-radius: var(--radius); border: 1px solid var(--line); box-shadow: var(--shadow); background: color-mix(in oklab, var(--panel) 90%, transparent); }
    #player-wrapper iframe{ width: 100%; height: 210px; border: 0; display:block; background: transparent; }

    #player-wrapper.sticky{
      position: fixed;
      top: var(--topbar-h);
      left: 50%;
      transform: translateX(-50%);
      width: min(var(--maxw), calc(100vw - (2 * var(--pad))));
      z-index: 40;

      padding: 0;
      background: transparent;
      border: none;
      box-shadow: none;
    }

    /* ----------------------------------
      Patreon locked player (Acast clone)
      ---------------------------------- */

    .patreon-lock{
      padding: 0;
    }

    .patreon-inner{
      display: grid;
      grid-template-columns: 160px 1fr;
      gap: 16px;
      align-items: center;
      padding: 16px;
      min-height: 210px; /* matches iframe height */
    }

    @media (max-width: 640px){
      .patreon-inner{
        grid-template-columns: 1fr;
        text-align: center;
      }
    }

    .patreon-art{
      width: 100%;
      height: auto;
      border-radius: var(--radius2);
      box-shadow: var(--shadow2);
    }

    .patreon-copy{
      display: flex;
      flex-direction: column;
      gap: 6px;
    }

    .patreon-copy strong{
      font-size: 16px;
      font-weight: 750;
      letter-spacing: -0.01em;
    }

    .patreon-copy p{
      margin: 0 0 10px;
      font-size: 14px;
      color: var(--muted);
      max-width: 44ch;
    }

    @media (max-width: 640px){
      .patreon-copy p{
        margin-left: auto;
        margin-right: auto;
      }
    }

    /* Main layout */
    .main{ padding: 18px 0 40px; }
    .grid{
      display:grid;
      grid-template-columns: 1fr;
      gap: 18px;
      align-items: start;
    }
    @media (max-width: 980px){
      .grid{ grid-template-columns: 1fr; }
    }

    /* Transcript tools */
    .tools{ padding: 14px; }
    .tools h2{ margin: 0 0 10px; font-size: 18px; letter-spacing: -0.02em; }

    .search{
      display:flex; gap: 10px; flex-wrap:wrap;
      margin-top: 10px;
    }
    .input{
      flex: 1 1 240px;
      padding: 10px 12px;
      border-radius: 14px;
      border: 1px solid var(--line);
      background: var(--panel);
      color: var(--text);
      outline: none;
      font-size: 14px;
    }
    .input::placeholder{ color: var(--muted2); }

    .small{ font-size: 13px; color: var(--muted2); margin-top: 8px; }

    /* Transcript */
    .transcript{ padding: 14px; }
    .turn{
      display:flex; gap: 10px;
      padding: 10px 12px;
      border-radius: 16px;
      border: 1px solid transparent;
      cursor: pointer;
      transition: background .12s ease, border-color .12s ease;
    }
    .turn:hover{ background: var(--panel); }
    .turn.active{
      background: color-mix(in oklab, var(--panel-2) 85%, transparent);
      border-color: color-mix(in oklab, var(--brand) 35%, var(--line));
      box-shadow: inset 0 0 0 1px color-mix(in oklab, var(--brand) 30%, transparent);
    }

    .who{ min-width: 92px; }
    .who .spk{
      display:inline-flex;
      padding: 6px 10px;
      border-radius: 999px;
      background: color-mix(in oklab, var(--accent) 28%, transparent);
      border: 1px solid var(--line);
      color: var(--text);
      font-weight: 750;
      font-size: 12px;
      letter-spacing: .02em;
      text-transform: none;
    }
    .who .ts{
      display:block;
      margin-top: 6px;
      font-variant-numeric: tabular-nums;
      color: var(--muted2);
      font-size: 12px;
      user-select: none;
    }
    .said{ color: var(--text); font-size: 15px; }
    .said mark{ background: color-mix(in oklab, var(--brand) 35%, transparent); color: inherit; padding: 0 .08em; border-radius: .25em; }

    /* Sidebar */
    .side{ padding: 14px; }
    .side h2{ margin: 0 0 10px; font-size: 18px; letter-spacing: -0.02em; }

    .side .links{ display:flex; gap: 10px; flex-wrap: wrap; margin: 10px 0 2px; }

    .hr{ height: 1px; background: var(--line); margin: 14px 0; border:0; }

    footer{ padding: 28px 0 40px; color: var(--muted2); font-size: 13px; }

    /* Reduced motion */
    @media (prefers-reduced-motion: reduce){
      *{ scroll-behavior: auto !important; transition: none !important; }
    }
  </style>
</head>

<body>
  <div class="topbar">
    <div class="wrap inner">
      <a class="brand" href="/" aria-label="Back to episodes index">
        
        <div style="min-width:0">
          <div class="name">The Strategists</div>
          <div class="tag">Transcripts</div>
        </div>
      </a>

      <div class="navlinks">
        <a class="chip" href="/">← <strong>All episodes</strong></a>
        
        <a class="chip" href="https://patreon.com/strategistspod" target="_blank" rel="noopener">Subscribe</a>
      </div>
    </div>
  </div>

  <header class="hero">
    <div class="wrap hero-grid">
      <section class="card hero-main">
        <h1>To celebrate the opening of voting in the Alberta NDP leadership race...</h1>

        <div class="meta">
          <span>June 3, 2024</span>
          
          
          
        </div>

        
          <div class="desc"><p>...a new (Zain disapproved, zAIn approved) song reminding you that everybody's free (to wear purple). <br /><em><br /></em><em>Courtesy </em><a href="https://twitter.com/haxim" target="_blank">Haxim</a><em>.</em></p></div>
        

        <div class="cta">
          <button class="btn primary" type="button" id="btn-copy">Copy link</button>
          <button class="btn" type="button" id="btn-copy-ts" title="Copies the link to the current moment (or selected line)">Copy link + timestamp</button>
          <a class="btn" href="#transcript" title="Jump to transcript">Jump to transcript</a>
        </div>
      </section>
    </div>

    <div class="wrap">

      <div id="player-wrapper">
        
          <div class="player-card patreon-lock">
  <div class="patreon-inner">
    <img
      src="/assets/patreon.jpg"
      alt="Patreon"
      class="patreon-art"
      loading="lazy"
    />
    <div class="patreon-copy">
      <strong>Patreon-only episode</strong>
      <p>Subscribe on Patreon to get full access to this episode.</p>
      <a
        class="btn primary"
        href="https://patreon.com/strategistspod"
        target="_blank"
        rel="noopener"
      >
        Unlock on Patreon →
      </a>
    </div>
  </div>
</div>
        
      </div>
      <div id="player-sentinel"></div>
    </div>
  </header>

  <main class="main">
    <div class="wrap grid">

      <section class="card">
        <div class="tools">
          <h2 id="transcript">Transcript</h2>
        </div>

        <div class="transcript" id="transcript-list" aria-label="Transcript">
          
          <div class="turn" data-start="0">
  <div class="who">
    <span class="speaker">Zain</span>
    <span class="ts">0:00</span>
  </div>
  <div class="said">Ladies and gentlemen of the class of 24, wear If I could offer you only one tip for the future, purple would be it. The long-term benefits of being a team player have been proven by political scientists, whereas the rest of my advice has no basis more reliable than my own meandering experience. I will dispense this advice now.</div>
</div>
<div class="turn" data-start="23">
  <div class="who">
    <span class="speaker">Zain</span>
    <span class="ts">0:23</span>
  </div>
  <div class="said">It&#x27;s always been over. There&#x27;s never not been a time that it hasn&#x27;t been over. Trust me, on June 22nd, you&#x27;ll look back at the start of the campaign and recall in a way you can&#x27;t grasp now how much possibility you thought lay before you. It&#x27;s more over than you imagine. Don&#x27;t worry about the future. Or worry. But know that because it&#x27;s over, you should be worrying about how to best bend the knee to Nenshi. The real troubles in your political career are apt to be believing it&#x27;s not over when it clearly is. Don&#x27;t forget about guilt. Don&#x27;t be reckless with other people&#x27;s endorsements. Don&#x27;t put up with people who are reckless with yours. Remember Hogan&#x27;s Law of Leadership Politics. The frontrunner always suggests they&#x27;re losing, and the loser always suggests they&#x27;re the frontrunner. Don&#x27;t feel guilty if you don&#x27;t know what you want to do after the leadership. Some of the most interesting people I know didn&#x27;t know what to do after they lost. I should know. I&#x27;m one of them. Be kind to your donors. You&#x27;ll miss them when they&#x27;re gone. You are not as nerdy or sassy as you think. Don&#x27;t expect anyone else to support you, except the tens of thousands of members you signed up. But you never know if they&#x27;ll bother to vote. Travel, and I don&#x27;t mean from Sunnyside to Hillhurst. If you want a solid path to victory, you&#x27;re going to need to appeal to workers and rural voters. Live in Calgary once, but leave before it makes you hard. Live in Edmonton once, but leave before it makes you soft. Accept certain inalienable truths. Kathleen will talk about her daughter, Jodi will talk about water, and Sarah.</div>
</div>
<div class="turn" data-start="127">
  <div class="who">
    <span class="speaker">Zain</span>
    <span class="ts">2:07</span>
  </div>
  <div class="said">don&#x27;t mess too much with your hair. If you keep getting it cut a little bit every week, you&#x27;ll be bald when you win the leadership. Maybe you&#x27;ll win, maybe you won&#x27;t. Maybe you&#x27;ll get to be deputy leader, maybe you won&#x27;t. Maybe you should have dropped out months ago instead of lighting piles of money on fire. Whatever you do, don&#x27;t berate yourself too much. Your choices are half chance. So are everybody else&#x27;s, except this one. It was clearly over long ago.</div>
</div>
<div class="turn" data-start="156">
  <div class="who">
    <span class="speaker">Zain</span>
    <span class="ts">2:36</span>
  </div>
  <div class="said">Don&#x27;t feel like you need to vote. It&#x27;s obvious Nenshi is going to win, so why waste your time? The only election with a more predetermined outcome would be Russia&#x27;s presidential elections. The Calgary Surge are a great product. Remember, it&#x27;s not just Take Back Alberta that can mobilize enough people to take over a political party. But trust me on the purple.</div>
</div>

        </div>
      </section>
    </div>
  </main>

  <footer>
    <div class="wrap">
      © 2026 The Strategists. Built with <a href="https://postmic.co">postmic</a> for fast reading, sharing, and search.
    </div>
  </footer>

  <script>
  // ------------------------------
  // Acast postMessage helper
  // (Docs: postmessage:do:seek uses seconds)
  // ------------------------------
  function acastPost(eventName, data){
    const iframe = document.getElementById('acast-player');
    if (!iframe || !iframe.contentWindow) return;
    try{
      iframe.contentWindow.postMessage(JSON.stringify({eventName, data: data || {}}), '*');
    }catch(e){ /* ignore */ }
  }

  // ------------------------------
  // Sticky player behavior
  // ------------------------------
  (function(){
    const wrap = document.getElementById('player-wrapper');
    const sentinel = document.getElementById('player-sentinel');
    if (!wrap || !sentinel || !('IntersectionObserver' in window)) return;

    const setBodyPad = () => {
      const topbar = document.querySelector('.topbar');
      const topbarH = topbar ? topbar.getBoundingClientRect().height : 0;
      const stickyH = wrap.classList.contains('sticky') ? wrap.getBoundingClientRect().height : 0;
      document.body.style.paddingTop = (wrap.classList.contains('sticky') ? (stickyH) : 0) + 'px';
      // Sticky is positioned under topbar; body padding avoids jump.
    };

    const io = new IntersectionObserver((entries) => {
      const e = entries[0];
      if (!e) return;
      if (e.isIntersecting){
        wrap.classList.remove('sticky');
      } else {
        wrap.classList.add('sticky');
      }
      setBodyPad();
    }, {threshold: [0]});

    io.observe(sentinel);
    window.addEventListener('resize', setBodyPad);
  })();

    (function(){
      const topbar = document.querySelector('.topbar');
      if (!topbar || !('IntersectionObserver' in window)) return;

      const sentinel = document.createElement('div');
      sentinel.style.position = 'absolute';
      sentinel.style.top = '0';
      sentinel.style.height = '1px';
      sentinel.style.width = '1px';
      topbar.before(sentinel);

      const io = new IntersectionObserver(entries => {
        const e = entries[0];
        if (!e) return;

        // When the topbar scrolls off, reclaim the space
        document.documentElement.style.setProperty(
          '--topbar-h',
          e.isIntersecting ? `${topbar.offsetHeight}px` : '0px'
        );
      }, { threshold: [0] });

      io.observe(sentinel);
    })();

  // ------------------------------
  // Transcript: normalize markup
  // Supports either:
  //  A) <div class="turn" data-start=".." data-speaker="..">...</div>
  //  B) legacy <p data-start=".."><span class="ts">..</span> ...</p>
  // ------------------------------
  function secondsToClock(s){
    s = Math.max(0, Math.floor(Number(s) || 0));
    const h = Math.floor(s/3600);
    const m = Math.floor((s%3600)/60);
    const ss = s%60;
    if (h>0) return `${h}:${String(m).padStart(2,'0')}:${String(ss).padStart(2,'0')}`;
    return `${m}:${String(ss).padStart(2,'0')}`;
  }

  function ensureTurnBlocks(){
    const list = document.getElementById('transcript-list');
    if (!list) return;

    // If we already have .turn blocks, do nothing.
    if (list.querySelector('.turn')) return;

    // Upgrade <p data-start> to .turn structure.
    const paras = Array.from(list.querySelectorAll('p[data-start]'));
    if (!paras.length) return;

    for (const p of paras){
      const start = p.getAttribute('data-start');
      const speaker = p.getAttribute('data-speaker') || '';
      const text = p.textContent || '';

      const t = document.createElement('div');
      t.className = 'turn';
      t.setAttribute('data-start', start);
      if (speaker) t.setAttribute('data-speaker', speaker);

      const who = document.createElement('div');
      who.className = 'who';
      const spk = document.createElement('div');
      spk.className = 'spk';
      spk.textContent = speaker || 'Speaker';
      const ts = document.createElement('span');
      ts.className = 'ts';
      ts.textContent = secondsToClock(start);
      who.appendChild(spk);
      who.appendChild(ts);

      const said = document.createElement('div');
      said.className = 'said';
      // remove any existing timestamp prefix in the old paragraph
      const clone = p.cloneNode(true);
      const tsSpan = clone.querySelector('.ts');
      if (tsSpan) tsSpan.remove();
      said.textContent = (clone.textContent || '').trim();

      t.appendChild(who);
      t.appendChild(said);
      p.replaceWith(t);
    }
  }

  // ------------------------------
  // Deep-linking: ?t=123 or #t=123
  // ------------------------------
  function getTFromURL(){
    const u = new URL(window.location.href);
    const qp = u.searchParams.get('t');
    if (qp) return Number(qp);
    if (u.hash && u.hash.startsWith('#t=')) return Number(u.hash.slice(3));
    return null;
  }

  function setURLTime(t){
    const u = new URL(window.location.href);
    u.searchParams.set('t', String(Math.max(0, Math.floor(t))));
    history.replaceState(null, '', u.toString());
  }

  // ------------------------------
  // Selection + seek
  // ------------------------------
  let selectedStart = null;

  function activateTurn(el){
    const list = document.getElementById('transcript-list');
    if (!list) return;
    list.querySelectorAll('.turn.active').forEach(n => n.classList.remove('active'));
    el.classList.add('active');

    const start = Number(el.getAttribute('data-start') || 0);
    selectedStart = start;

    // update URL
    setURLTime(start);

    // seek and play
    acastPost('postmessage:do:seek', { position: start });
    acastPost('postmessage:do:play');
  }

  function scrollTurnIntoView(el){
    if (!el) return;
    const rect = el.getBoundingClientRect();
    const topbar = document.querySelector('.topbar');
    const topbarH = topbar ? topbar.getBoundingClientRect().height : 0;
    if (rect.top < topbarH + 10 || rect.bottom > window.innerHeight - 12){
      el.scrollIntoView({behavior: 'smooth', block: 'center'});
    }
  }

  // ------------------------------
  // Clipboard helpers
  // ------------------------------
  async function copyText(text){
    try{
      await navigator.clipboard.writeText(text);
      return true;
    }catch(e){
      // fallback
      try{
        const ta = document.createElement('textarea');
        ta.value = text;
        ta.style.position = 'fixed';
        ta.style.left = '-9999px';
        document.body.appendChild(ta);
        ta.focus();
        ta.select();
        const ok = document.execCommand('copy');
        ta.remove();
        return ok;
      }catch(_){
        return false;
      }
    }
  }

  function currentShareURL(includeTime){
    const u = new URL(window.location.href);
    if (includeTime){
      const t = selectedStart ?? getTFromURL() ?? 0;
      u.searchParams.set('t', String(Math.max(0, Math.floor(t))));
    } else {
      u.searchParams.delete('t');
    }
    return u.toString();
  }

  // ------------------------------
  // Boot
  // ------------------------------
  (function(){
    ensureTurnBlocks();

    const list = document.getElementById('transcript-list');
    if (list){
      list.addEventListener('click', (e) => {
        const turn = e.target.closest('.turn');
        if (!turn) return;
        activateTurn(turn);
      });
    }

    const btnCopy = document.getElementById('btn-copy');
    const btnCopyTs = document.getElementById('btn-copy-ts');
    if (btnCopy){
      btnCopy.addEventListener('click', async () => {
        const ok = await copyText(currentShareURL(false));
        btnCopy.textContent = ok ? 'Copied!' : 'Copy failed';
        setTimeout(() => btnCopy.textContent = 'Copy link', 1200);
      });
    }
    if (btnCopyTs){
      btnCopyTs.addEventListener('click', async () => {
        const ok = await copyText(currentShareURL(true));
        btnCopyTs.textContent = ok ? 'Copied!' : 'Copy failed';
        setTimeout(() => btnCopyTs.textContent = 'Copy link + timestamp', 1200);
      });
    }

    // Apply deep-linked time
    const t = getTFromURL();
    if (t != null && !Number.isNaN(t)){
      // Find nearest turn
      const turns = Array.from(document.querySelectorAll('.turn[data-start]'));
      let best = null;
      let bestDist = Infinity;
      for (const el of turns){
        const s = Number(el.getAttribute('data-start') || 0);
        const d = Math.abs(s - t);
        if (d < bestDist){ bestDist = d; best = el; }
      }
      if (best){
        best.classList.add('active');
        selectedStart = Number(best.getAttribute('data-start') || 0);
        scrollTurnIntoView(best);
        // Seek without autoplay on load (safer)
        acastPost('postmessage:do:seek', { position: selectedStart });
      }
    }
  })();
  </script>
</body>
</html>